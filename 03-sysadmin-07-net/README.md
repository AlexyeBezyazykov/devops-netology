#Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

		ifconfig, ip - Linux
		ipconfig - Windows

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

		Протокол называется LLDP.
		Распознать соседа по сетевому интерфейсу возможно с помощью пакета LLDPD, командой "lldpctl".

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

		Для разделение коммутатора на виртуальные сети используется технология "vlan".
	
		vagrant@vagrant:~$ sudo vconfig add eth0 900
		
		Warning: vconfig is deprecated and might be removed in the future, please migrate to ip(route2) as soon as possible!
		vagrant@vagrant:~$ sudo ip addr add 10.0.5.5/24 dev eth0.900
		vagrant@vagrant:~$ sudo ip link set up eth0.900
		vagrant@vagrant:~$ ip a
		1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
		    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
		    inet 127.0.0.1/8 scope host lo
		       valid_lft forever preferred_lft forever
		    inet6 ::1/128 scope host
		       valid_lft forever preferred_lft forever
		2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
		    link/ether 08:00:27:a2:6b:fd brd ff:ff:ff:ff:ff:ff
		    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic eth0
		       valid_lft 85295sec preferred_lft 85295sec
		    inet6 fe80::a00:27ff:fea2:6bfd/64 scope link
		       valid_lft forever preferred_lft forever
		3: eth0.900@eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
		    link/ether 08:00:27:a2:6b:fd brd ff:ff:ff:ff:ff:ff
		    inet 10.0.5.5/24 scope global eth0.900
		       valid_lft forever preferred_lft forever
		    inet6 fe80::a00:27ff:fea2:6bfd/64 scope link
		       valid_lft forever preferred_lft forever
		       
	    данный пример конфигурации не сохранится после перезагрузки машины, для того чтобы изменения были сохранены, необходимо конфигурировать файл файл /etc/network/interfaces.
	    
		    auto eth0.900
		iface eth0.1400 inet static
		        address 10.0.5.5
		        netmask 255.255.255.0
		        vlan_raw_device eth0

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

		Типы агрегации в Linux:
		1. balance-rr
		2. active-backup
		3. balance-xor
		4. broadcast
		5. 802.3ad
		6. balance-tlb
		7. balance-alb
		
		 Опции для балансировки нагрузки устанавливаются mode= (от 0 до 6, соответственно типам агрегации).
		
		Пример конфигурационного файла /etc/network/interfaces
		
		auto bond0
		iface bond0 inet static
		    address 10.0.2.15
		    netmask 255.255.255.0
		    gateway 10.0.2.254
		    dns-nameservers 10.0.2.1 8.8.8.8
		    dns-search domain.local
		        slaves eth0 eth1
		        bond_mode 0
		        bond-miimon 100
		        bond_downdelay 200
		        bound_updelay 200

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

		ipcalc 10.10.10.0/29
		Address:   10.10.10.0           00001010.00001010.00001010.00000 000
		Netmask:   255.255.255.248 = 29 11111111.11111111.11111111.11111 000
		Wildcard:  0.0.0.7              00000000.00000000.00000000.00000 111
		=>
		Network:   10.10.10.0/29        00001010.00001010.00001010.00000 000
		HostMin:   10.10.10.1           00001010.00001010.00001010.00000 001
		HostMax:   10.10.10.6           00001010.00001010.00001010.00000 110
		Broadcast: 10.10.10.7           00001010.00001010.00001010.00000 111
		Hosts/Net: 6                     Class A, Private Internet
		
		в подсети 10.10.10.0/29 8 адрессов, из них 6 хостов.
		
		ipcalc 10.10.10.0/24
		Address:   10.10.10.0           00001010.00001010.00001010. 00000000
		Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
		Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
		=>
		Network:   10.10.10.0/24        00001010.00001010.00001010. 00000000
		HostMin:   10.10.10.1           00001010.00001010.00001010. 00000001
		HostMax:   10.10.10.254         00001010.00001010.00001010. 11111110
		Broadcast: 10.10.10.255         00001010.00001010.00001010. 11111111
		Hosts/Net: 254                   Class A, Private Internet
		
		в подсети 10.10.10.0/24 256 адресов, из них  254 хоста.

		Посеть 10.10.10.0/24 можно разделить на 32 подсети 10.10.10.0/29, например 
		10.10.10.0/29, 10.10.10.8/29, 10.10.10.16/29, 10.10.10.24/29 и т.д. до 10.10.10.248/29

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

		Существуют так же частные подсети с диапазоном от 100.64.0.0 до 100.127.255.255 с маской подсети /10.
		возьмем для примера подсеть 100.64.0.0
		
		ipcalc 100.64.0.0/10 -s 50
		Address:   100.64.0.0           01100100.01 000000.00000000.00000000
		Netmask:   255.192.0.0 = 10     11111111.11 000000.00000000.00000000
		Wildcard:  0.63.255.255         00000000.00 111111.11111111.11111111
		=>
		Network:   100.64.0.0/10        01100100.01 000000.00000000.00000000
		HostMin:   100.64.0.1           01100100.01 000000.00000000.00000001
		HostMax:   100.127.255.254      01100100.01 111111.11111111.11111110
		Broadcast: 100.127.255.255      01100100.01 111111.11111111.11111111
		Hosts/Net: 4194302               Class A

		1. Requested size: 50 hosts
		Netmask:   255.255.255.192 = 26 11111111.11111111.11111111.11 000000
		Network:   100.64.0.0/26        01100100.01000000.00000000.00 000000
		HostMin:   100.64.0.1           01100100.01000000.00000000.00 000001
		HostMax:   100.64.0.62          01100100.01000000.00000000.00 111110
		Broadcast: 100.64.0.63          01100100.01000000.00000000.00 111111
		Hosts/Net: 62                    Class A
		
		Needed size:  64 addresses.
		Used network: 100.64.0.0/26
		Unused:
		100.64.0.64/26
		100.64.0.128/25
		100.64.1.0/24
		100.64.2.0/23
		100.64.4.0/22
		100.64.8.0/21
		100.64.16.0/20
		100.64.32.0/19
		100.64.64.0/18
		100.64.128.0/17
		100.65.0.0/16
		100.66.0.0/15
		100.68.0.0/14
		100.72.0.0/13
		100.80.0.0/12
		100.96.0.0/11
		
		таким образом лучшим вариантом для посмтавленной. задачи будет подсеть 100.64.0.0/26


7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

		Linux:
		Просмотр ARP таблицы  - arp, ip neigh
		Очистить кеш полностью - sudo ip neigh flush all
		Удалить один IP - sudo arp -d xxx.xxx.xxx.xxx
		
		Windows:
		Просмотр ARP таблицы  - arp -a
		Очистить кеш полностью - arp -d 
		Удалить один IP - arp -d xxx.xxx.xxx.xxx

